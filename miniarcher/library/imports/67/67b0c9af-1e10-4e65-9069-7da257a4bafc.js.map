{"version":3,"sources":["../../../../../assets/script/view/assets/script/view/GameView.js"],"names":["Utils","require","playerInfo","cc","Class","extends","Component","properties","cloudies","default","type","Node","grasses1","grasses2","roads","roadContents","targets","polyTargets","polyLines","polyStands","targetsMask","player","goldLabel","Label","scoreLabel","arrowLabel","btnStart","btnPause","addArrow","addTime","addScores","startPos","v2","visible","curIndex","abandonArrows","modelType","score","levelIndex","curHitNum","state","arrowNum","timeDown","levelBar","hand","arrow","ui_main","SpriteAtlas","clockIc","arrowIc","booms","particles","ParticleSystem","whiteFrame","SpriteFrame","lvProgress","firework","fireworks","ui_anim","curLevelInfo","reviveChance","goldIc","addArrowNo","addGoldNo","startLevel","awarded","onLoad","i6","windowSize","view","getVisibleSize","cur","height","width","toFixed","widget","parent","getComponent","Widget","top","updateAlignment","infoTemp","init","start","node","on","EventType","TOUCH_START","event","onMouseDown","TOUCH_MOVE","onMouseMove","TOUCH_END","onMouseUp","TOUCH_CANCEL","i","length","zIndex","updateSkin","updateGold","initLevel","data","genLevelInfo","info","polyType","active","drawLine","initStand","stand","x","pivotX","pivotY","y","index","next","anchorY","getDistance","startX","startY","line","gameInstance","gameView","position","rotation","getS2TAngle","getCurLevelInfo","levelesInfo","randLevelIndex","getCurTargetsInfo","parseInt","Math","random","parentNo","selfNo","push","getCurMustShoot","n","mustShoot","update","dt","startGame","maxArrow","updateArrow","timeLimit","string","schedule","timeLoop","soundManager","playClock","lastLevelIndex","targetParent","targetParent1","playHand","stopAllActions","scale","runAction","repeatForever","sequence","scaleTo","callFunc","scaleX","bind","moveBy","delayTime","rotateTo","easing","easeSineOut","easeSineInOut","stopHand","gameOver","unschedule","stopClock","overView","adView","pauseTargets","revive","resumeTargets","pauseMove","resumeMove","onBtnStart","playSound","pauseView","onBtnPause","shootEnable","moving","putArrow","getLocation","pos","aim","shoot","updateLevelIndex","move","jump","grass","easeQuadraticActionInOut","road","content","clearArrows","sys","localStorage","setItem","sdkHelper","uploadPlayerInfo","rst","awardView","updateProgress","j","hit","stopMove","addScore","target","head","gold","awardGold","addLife","go1","instantiate","convertToWorldSpaceAR","spawn","easeQuadraticActionOut","easeQuadraticActionIn","fadeOut","go","highScore","uploadScore","awardArrow","awardTime","resetTargets","reset","showBoomFire","scheduleOnce","getFirework","ran","moveTo","fadeTo","time","showFirework","rotateBy","num","Sprite","spriteFrame","getSpriteFrame","pop"],"mappings":"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","file":"GameView.js","sourceRoot":"../../../../../assets/script/view","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\nvar Utils = require(\"../Utils/Utils\");\nvar playerInfo = require(\"../game/PlayerInfo\");\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n\n        cloudies:{\n            default:[],\n            type:[cc.Node],\n        },\n        grasses1:{\n            default:[],\n            type:[cc.Node],\n        },\n        grasses2:{\n            default:[],\n            type:[cc.Node],\n        },\n        roads:{\n            default:[],\n            type:[cc.Node],\n        },\n        roadContents:{\n            default:[],\n            type:[cc.Node],\n        },\n        targets:{\n            default:[],\n            type:[require(\"Target\")],\n        },\n        polyTargets:{\n            default:[],\n            type:[require(\"PolyTargetNode\")],\n        },\n        polyLines:{\n            default:[],\n            type:[cc.Node],\n        },\n        polyStands:{\n            default:[],\n            type:[cc.Node],\n        },\n        targetsMask:{\n            default:[],\n            type:cc.Node,\n        },\n        player:{\n            default:null,\n            type:require(\"Player\")\n        },\n        goldLabel:{\n            default:null,\n            type:cc.Label,\n        },\n        scoreLabel:{\n            default:null,\n            type:cc.Label,\n        },\n        arrowLabel:{\n            default:null,\n            type:cc.Label,\n        },\n        btnStart:{\n            default:null,\n            type:cc.Node,\n        },\n        btnPause:{\n            default:null,\n            type:cc.Node,\n        },\n        addArrow:{\n            default:null,\n            type:cc.Node,\n        },\n        addTime:{\n            default:null,\n            type:cc.Node,\n        },\n        addScores:{\n            default:[],\n            type:[cc.Node],\n        },\n        startPos:{\n            default:cc.v2(0,0),\n            visible:false,\n        },\n        curIndex:{\n            default:0,\n            visible:false,\n        },\n        abandonArrows:{\n            default:[],\n            visible:false,\n        },\n        modelType:{\n            default:1, //1数量，2时间\n            visible:false,\n        },\n        score:{\n            default:0,\n            visible:false,\n        },\n        levelIndex:{\n            default:0,\n            visible:false,\n        },\n        curHitNum:{\n            default:0,\n            visible:false,\n        },\n        state:{\n            default:\"idle\",\n            visible:false,\n        },\n        arrowNum:{\n            default:14,\n            visible:false,\n        },\n        timeDown:{\n            default:30,\n            visible:false,\n        },\n        levelBar:{\n            default:null,\n            type:require(\"LevelBar\")\n        },\n        hand:{\n            default:null,\n            type:cc.Node,\n        },\n        arrow:{\n            default:null,\n            type:cc.Node,\n        },\n        ui_main:{\n            default:null,\n            type:cc.SpriteAtlas,\n        },\n        clockIc:{\n            default:null,\n            type:cc.Node,\n        },\n        arrowIc:{\n            default:null,\n            type:cc.Node,\n        },\n        booms:{\n            default:[],\n            type:[require(\"Boom\")]\n        },\n        particles:{\n            default:[],\n            type:[cc.ParticleSystem]\n        },\n        whiteFrame:{\n            default:null,\n            type:cc.SpriteFrame,\n        },\n        lvProgress:{\n            default:null,\n            type:require(\"LvProgressBar\")\n        },\n        firework:{\n            default:null,\n            type:cc.Node\n        },\n        fireworks:{\n            default:[],\n            visible:false\n        },\n        ui_anim:{\n            default:null,\n            type:cc.SpriteAtlas,\n        },\n        curLevelInfo:{\n            default:[],\n            visible:false,\n        },\n        reviveChance:{\n            default:1,\n            visible:false,\n        },\n        goldIc:{\n            default:null,\n            type:cc.Node,\n        },\n        addArrowNo:{\n            default:null,\n            type:cc.Node,\n        },\n        addGoldNo:{\n            default:null,\n            type:cc.Node,\n        },\n        startLevel:{\n            default:0,\n            visible:false,\n        },\n        awarded:{\n            default:false,\n            visible:false,\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        let i6 = 1334 / 750;\n        let windowSize = cc.view.getVisibleSize();\n        let cur = windowSize.height / windowSize.width;\n\n        if(cur.toFixed(3) > i6.toFixed(3)){\n            let widget = this.btnStart.parent.getComponent(cc.Widget);\n            widget.top = 220;\n            widget.updateAlignment();\n        }\n\n        this.infoTemp = [\n            {\"parentNo\":1,\"selfNo\":1,\"hasBoss\":\"false\",\"pivotX\":0,\"pivotY\":0,\"polyType\":0},\n            [\n                {\"startX\":0,\"startY\":0,\"height\":450,\"moveY\":100,\"moveDir\":1,\"speed\":1,\"awardGold\":1,\"awardArrow\":1,\"awardTime\":2,\"skinType\":1,\"mustShoot\":\"true\",\"penetratable\":\"false\",\"movenable\":\"false\"}\n            ]\n        ],\n        this.init();\n    },\n\n    start () {\n    },\n\n    init(){\n        \n        this.node.on(cc.Node.EventType.TOUCH_START, function (event) {\n            this.onMouseDown(event);\n        }, this);\n\n        this.node.on(cc.Node.EventType.TOUCH_MOVE, function (event) {\n            this.onMouseMove(event);\n        }, this);\n\n        this.node.on(cc.Node.EventType.TOUCH_END, function (event) {\n            this.onMouseUp(event);\n        }, this);\n\n        this.node.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\n            this.onMouseUp(event);\n        }, this);\n\n        for(let i = 0; i < this.targetsMask.length; ++i){\n            this.targetsMask[i].zIndex = this.targetsMask.length - i;\n            if(i == 0){\n                this.targetsMask[i].parent.parent.parent.zIndex = 2;\n            }\n        }\n        \n        this.player.updateSkin();\n        this.updateGold();\n    },\n\n    initLevel(){\n        let data = this.genLevelInfo();\n        let info = data[0];\n        let targets = data[1];\n\n        if(info.polyType == 0){\n            for(let i = 0; i < targets.length; ++i){\n                this.targets[this.curIndex * 3 + i].node.active = true;\n                this.targets[this.curIndex * 3 + i].init(targets[i], i);\n            }\n        }\n        else{\n            for(let i = 0; i < targets.length; ++i){\n                this.polyTargets[this.curIndex * 10 + i].node.active = true;\n                this.polyTargets[this.curIndex * 10 + i].init(targets[i], i);\n                this.drawLine(info,targets,i);\n            }\n            this.initStand(info);\n        }\n    },\n\n    initStand(info){\n        let stand = this.polyStands[this.curIndex];\n        stand.x = info.pivotX;\n        stand.height = info.pivotY - stand.y;\n        stand.active = true;\n    },\n\n    drawLine(info, targets, index){\n        if(info.polyType == 2 && index == targets.length - 1){\n            return;\n            \n        }\n        \n        let cur = targets[index];\n        let next = index == targets.length - 1 ? targets[0] : targets[index + 1];\n        let anchorY = 0.11 * 117;\n        let length = anchorY * 2 + Utils.getDistance(cur.startX, next.startX, cur.startY, next.startY);\n        let line = gameInstance.gameView.polyLines[this.curIndex * 10 + index];\n        line.active = true;\n        line.position = cc.v2(cur.startX, cur.startY);\n        line.height = length;\n        line.anchorY = anchorY / length;\n        line.rotation = Utils.getS2TAngle(cur.startX, next.startX, cur.startY, next.startY, 1) - 90;\n    },\n\n    getCurLevelInfo(){\n        if(this.modelType == 0)\n            return gameInstance.levelesInfo[this.levelIndex > 59 ? this.randLevelIndex : this.levelIndex][0];\n        else \n            return this.curLevelInfo[0];\n    },\n\n    getCurTargetsInfo(){\n        if(this.modelType == 0)\n            return gameInstance.levelesInfo[this.levelIndex > 59 ? this.randLevelIndex : this.levelIndex][1];\n        else\n            return this.curLevelInfo[1];\n    },\n\n    genLevelInfo(){\n        if(this.modelType == 0){\n            let index = this.levelIndex;\n            if(index > 59){\n                index = parseInt(Math.random() * 60);\n                this.randLevelIndex = index;\n            }\n\n            return gameInstance.levelesInfo[index];\n        }\n        else{\n            let data = this.infoTemp;\n            let info = data[0];\n            let targets = data[1];\n            info.parentNo = parseInt(this.levelIndex / 5) + 1;\n            info.selfNo = this.levelIndex % 5 + 1;\n            this.curLevelInfo.push(info);\n            targets[0].height = Math.random() * 500 + 250;\n            targets[0].startX = (Math.random() - .5) * 240;\n\n            this.curLevelInfo.push(targets);\n\n            return this.curLevelInfo;\n        }\n    },\n\n    getCurMustShoot(){\n        let n = 0;\n        let targets = this.getCurTargetsInfo();\n        for(let i = 0; i < targets.length; ++i)\n            if(targets[i].mustShoot == \"true\")\n                n++;\n\n        return n;\n    },\n\n    update (dt) {\n        for(let i = 0; i < this.cloudies.length; ++i){\n            this.cloudies[i].position = cc.v2(this.cloudies[i].position.x - 1, 0);\n            if(this.cloudies[i].position.x < -this.node.width)\n                this.cloudies[i].position = cc.v2(this.node.width, 0);\n\n        }\n    },\n\n    startGame(type){\n        this.modelType = type;\n        switch(type){\n            case 0:\n                this.arrowNum = playerInfo.maxArrow;\n                this.updateArrow();\n                this.arrowIc.active = true;\n                this.clockIc.active = false;\n                break;\n            case 1:\n                this.timeDown = playerInfo.timeLimit;\n                this.arrowLabel.string = \"\" + this.timeDown;\n                this.schedule(this.timeLoop, 1);\n                gameInstance.soundManager.playClock();\n                this.arrowIc.active = false;\n                this.clockIc.active = true;\n                break;\n            case 2:\n                break;\n            case 3:\n                break;\n        }\n\n        this.arrowLabel.node.parent.active = true;\n        this.scoreLabel.node.active = true;\n        this.btnPause.active = true;\n        this.levelIndex = this.modelType == 0 ? parseInt(playerInfo.lastLevelIndex / 5) * 5 : 0;\n        \n        for(let i = 0; i < 2; ++i){\n            let targetParent = this.targets[i * 3].node.parent; \n            targetParent.x = 215 + i * 828;\n\n            let targetParent1 = this.polyTargets[i * 10].node.parent; \n            targetParent1.x = 215 + i * 828;\n        }\n        \n        this.initLevel(this.levelIndex);\n        this.lvProgress.init(this.levelIndex);\n        this.lvProgress.node.active = this.modelType == 0;\n        this.playHand();\n\n        this.startLevel = this.levelIndex;\n        this.state = \"running\";\n\n    },\n\n    playHand(){\n        this.hand.stopAllActions();\n        this.arrow.stopAllActions();\n        this.hand.active = true;\n        this.hand.position = cc.v2(110,190);\n        this.hand.scale = 1.2;\n        this.hand.runAction(cc.repeatForever(\n            cc.sequence(\n                cc.scaleTo(.2,1),\n                cc.callFunc(function(){\n                    this.arrow.active = true;\n                    this.arrow.rotation = 0;\n                    this.arrow.scaleX = 0;\n                    this.arrow.runAction(cc.scaleTo(.5,1));\n                }.bind(this)),\n                cc.moveBy(.5,cc.v2(-200,0)),\n                cc.delayTime(.3),\n                cc.callFunc(function(){\n                    this.arrow.runAction(cc.rotateTo(.5,-30).easing(cc.easeSineOut()));\n                }.bind(this)),\n                cc.moveBy(.5,cc.v2(0,200)).easing(cc.easeSineOut()),\n                cc.callFunc(function(){\n                    this.arrow.runAction(cc.rotateTo(.5,30).easing(cc.easeSineInOut()));\n                }.bind(this)),\n                cc.moveBy(1.0,cc.v2(0,-400)).easing(cc.easeSineInOut()),\n                cc.delayTime(.3),\n                cc.callFunc(function(){\n                    this.arrow.runAction(cc.scaleTo(.2,0,1));\n                }.bind(this)),\n                cc.scaleTo(.2,1.2),\n                cc.delayTime(1),\n                cc.moveBy(.5,cc.v2(200,200))\n            )\n        ))\n    },\n\n    stopHand(){\n        this.hand.active = false;\n        this.arrow.active = false;\n        this.hand.stopAllActions();\n        this.arrow.stopAllActions();\n    },\n\n    timeLoop(){\n        if(this.state!=\"running\") return;\n        this.timeDown--;\n        this.arrowLabel.string = \"\" + this.timeDown;\n        if(this.timeDown == 0){\n            this.gameOver();\n            this.unschedule(this.timeLoop);\n            gameInstance.soundManager.stopClock();\n        }\n    },\n\n    gameOver(){\n        this.state = \"over\";\n        if(this.reviveChance == 0){\n            gameInstance.overView.node.active = true;\n            gameInstance.overView.init();\n            return;\n        }\n        this.reviveChance--;\n        gameInstance.adView.node.active = true;\n        gameInstance.adView.init();\n        this.pauseTargets();\n    },\n    \n    revive(){\n        if(this.modelType == 0){\n            this.arrowNum += 5;\n            this.updateArrow();\n        }\n        else{\n            this.timeDown += 15;\n            this.arrowLabel.string = \"\" + this.timeDown;\n            this.schedule(this.timeLoop, 1);\n            gameInstance.soundManager.playClock();\n        }\n        this.state = \"running\";       \n        \n        this.resumeTargets();\n\n    },\n\n    pauseTargets(){\n        for(let i = this.curIndex * 3; i < this.curIndex * 3 + 3; ++i){\n            this.targets[i].pauseMove();\n        }\n        for(let i = this.curIndex * 10; i < this.curIndex * 10 + 10; ++i){\n            this.polyTargets[i].pauseMove();\n        }\n    },\n\n    resumeTargets(){\n        for(let i = this.curIndex * 3; i < this.curIndex * 3 + 3; ++i){\n            this.targets[i].resumeMove();\n        }\n        for(let i = this.curIndex * 10; i < this.curIndex * 10 + 10; ++i){\n            this.polyTargets[i].resumeMove();\n        }\n    },\n\n    onBtnStart(){\n        gameInstance.soundManager.playSound(\"btn\");\n        this.state = \"running\";\n        gameInstance.pauseView.node.active = false;\n        this.btnStart.active = false;\n        this.btnPause.active = true;\n        this.resumeTargets();\n        if(this.modelType == 1)\n            gameInstance.soundManager.playClock();\n    },\n\n    onBtnPause(){\n        gameInstance.soundManager.playSound(\"btn\");\n        if(!this.player.shootEnable || this.moving) return;\n        if(this.modelType == 1 && this.timeDown <= 1) return;\n        this.state = \"pause\";\n        gameInstance.pauseView.node.active = true;\n        this.btnStart.active = true;\n        this.btnPause.active = false;\n        this.pauseTargets();\n        gameInstance.soundManager.stopClock();\n    },\n\n    onMouseDown(event){\n        if(this.state != \"running\") return;\n        this.stopHand();\n        this.player.putArrow();\n        this.startPos = event.getLocation();\n    },\n\n    onMouseMove(event){\n        if(this.state != \"running\") return;\n        let pos = event.getLocation();\n        this.player.aim(this.startPos, pos);\n    },\n\n    onMouseUp(event){\n        if(this.moving) return;\n        if(this.state != \"running\") return;\n        let pos = event.getLocation();\n        if(Utils.getDistance(pos.x,this.startPos.x,pos.y,this.startPos.y) < 1) return;\n        this.player.shoot();\n    },\n\n    updateLevelIndex(){\n        this.levelIndex ++;\n    },\n\n    move(){\n        if(this.moving) return;\n        this.moving = true;\n        this.player.jump();\n        for(let i = 0; i < this.grasses1.length; ++i){\n            let grass = this.grasses1[i];            \n            grass.runAction(cc.sequence(\n                cc.moveBy(1,cc.v2(-this.node.width * .2,0)).easing(cc.easeQuadraticActionInOut(1.5)),\n                cc.callFunc(function(){\n                    if(grass.position.x < -this.node.width + 10){\n                        grass.position = cc.v2(this.node.width,0);\n                    }\n\n                    this.moving = false;\n                }.bind(this))\n            ));\n        }\n\n        for(let i = 0; i < this.grasses2.length; ++i){\n            let grass = this.grasses2[i];            \n            grass.runAction(cc.sequence(\n                cc.moveBy(1,cc.v2(-this.node.width * .1,0)).easing(cc.easeQuadraticActionInOut(1.5)),\n                cc.callFunc(function(){\n                    if(grass.position.x < -this.node.width + 10){\n                        grass.position = cc.v2(this.node.width,0);\n                    }\n                }.bind(this))\n            ));\n        }\n\n        for(let i = 0; i < this.roads.length; ++i){\n            let road = this.roads[i];            \n            road.runAction(cc.sequence(\n                cc.moveBy(1,cc.v2(-this.node.width,0)).easing(cc.easeQuadraticActionInOut(1.5)),\n                cc.callFunc(function(){\n                    if(road.position.x < -this.node.width + 10){\n                        road.position = cc.v2(this.node.width,0);\n                    }\n                }.bind(this))\n            ));\n        }\n\n        for(let i = 0; i < this.roadContents.length; ++i){\n            let content = this.roadContents[i];            \n            content.runAction(cc.sequence(\n                cc.moveBy(1,cc.v2(-this.node.width,0)).easing(cc.easeQuadraticActionInOut(1.5)),\n                cc.callFunc(function(){\n                    if(content.position.x < -this.node.width + 10){\n                        content.position = cc.v2(this.node.width,0);\n                        this.player.clearArrows();\n                    }\n                }.bind(this))\n            ));\n        }\n\n        this.curHitNum = 0;\n        this.curIndex = this.curIndex == 0 ? 1 : 0;\n        this.updateLevelIndex();\n        if(this.modelType == 0){\n            playerInfo.lastLevelIndex = this.levelIndex;\n            cc.sys.localStorage.setItem(\"playerinfo_lastlevelindex\",playerInfo.lastLevelIndex);\n            gameInstance.sdkHelper.uploadPlayerInfo();\n        }\n        if(this.state == \"running\" && !this.awarded && this.levelIndex >= this.startLevel + 10 && Math.random() < .33){\n            let rst = gameInstance.awardView.init();\n            gameInstance.awardView.node.active = rst;\n            if(rst)this.state = \"pause\";\n            gameInstance.soundManager.stopClock();\n            this.awarded = true;\n        }\n        this.initLevel(this.levelIndex);\n        this.lvProgress.updateProgress();\n        for(let i = 0; i < 2; ++i){\n            let targetParent = this.targets[i * 3].node.parent; \n\n            targetParent.runAction(cc.sequence(\n                cc.moveBy(1,cc.v2(-this.node.width,0)).easing(cc.easeQuadraticActionInOut(1.5)),\n                cc.callFunc(function(){\n                    if(targetParent.position.x < 215 - this.node.width + 10){\n                        targetParent.position = cc.v2(215 + this.node.width,targetParent.position.y);\n                        for(let j = i * 3; j < i * 3 + 3; ++j){\n                            this.targets[j].node.active = false;\n                            this.targets[j].hit = false;\n                            this.targets[j].stopMove();\n                        }\n                    }\n                }.bind(this))\n            ));\n\n            let targetParent1 = this.polyTargets[i * 10].node.parent; \n\n            targetParent1.runAction(cc.sequence(\n                cc.moveBy(1,cc.v2(-this.node.width,0)).easing(cc.easeQuadraticActionInOut(1.5)),\n                cc.callFunc(function(){\n                    if(targetParent1.position.x < 215 - this.node.width + 10){\n                        targetParent1.position = cc.v2(215 + this.node.width,targetParent1.position.y);\n                        for(let j = i * 10; j < i * 10 + 10; ++j){\n                            this.polyTargets[j].node.active = false;\n                            this.polyTargets[j].hit = false;\n                            this.polyTargets[j].stopMove();\n                            this.polyLines[j].active = false;\n                        }\n                        this.polyStands[i].active = false;\n\n                    }\n                }.bind(this))\n            ));\n        }\n    },\n\n    addScore(score, target){\n        let index = 0;\n        let node = target.head == null ? target.node : target.head;\n        if(score == 30){ \n            index = 2;\n            playerInfo.gold += target.awardGold;\n            cc.sys.localStorage.setItem(\"playerinfo_gold\",playerInfo.gold);\n            gameInstance.sdkHelper.uploadPlayerInfo();\n            this.updateGold();\n            this.addLife(target);\n\n            let go1 = cc.instantiate(this.goldIc);\n            let pos = node.convertToWorldSpaceAR(cc.v2(-60, 160,0));\n            go1.position = cc.v2(pos.x - this.node.width / 2, pos.y - cc.view.getVisibleSize().height / 2 - 100);\n            go1.parent = this.node;\n            go1.active = true;\n            go1.runAction(cc.sequence(\n                cc.delayTime(.0),\n                cc.spawn(\n                    cc.moveBy(.5,cc.v2(-100,0)),\n                    cc.sequence(\n                        cc.moveBy(.2,cc.v2(0,50)).easing(cc.easeQuadraticActionOut()),\n                        cc.moveBy(.3,cc.v2(0,-100)).easing(cc.easeQuadraticActionIn()),\n                    ),\n                    cc.fadeOut(.5),\n                )\n            ))\n\n        }\n        else if(score == 20) index = 1;\n        let go = cc.instantiate(this.addScores[index]);\n        let pos = node.convertToWorldSpaceAR(cc.v2(0,0));\n        go.position = cc.v2(pos.x - this.node.width / 2, pos.y - cc.view.getVisibleSize().height / 2 - 100);\n        go.parent = this.node;\n        go.active = true;\n        go.scale = 1.2;\n        go.runAction(cc.sequence(\n            cc.scaleTo(.15, .8).easing(cc.easeQuadraticActionInOut()),\n            cc.scaleTo(.15, 1.12).easing(cc.easeQuadraticActionInOut()),\n            cc.scaleTo(.15, 0.88).easing(cc.easeQuadraticActionInOut()),\n            cc.scaleTo(.15, 1.05).easing(cc.easeQuadraticActionInOut()),\n            cc.scaleTo(.15, .95).easing(cc.easeQuadraticActionInOut()),\n            cc.scaleTo(.15, 1).easing(cc.easeQuadraticActionIn()),\n            cc.delayTime(.2),\n            cc.fadeOut(.5),\n        ))\n        \n        this.score += score;\n        this.scoreLabel.string = \"\"+this.score;\n        if(this.score > playerInfo.highScore){\n            playerInfo.highScore = this.score;\n            cc.sys.localStorage.setItem(\"playerinfo_highscore\",playerInfo.highScore);\n            gameInstance.sdkHelper.uploadScore(score);\n            \n        }\n    },\n\n    addLife(target){\n        let go = cc.instantiate(this.modelType == 0 ? this.addArrow : this.addTime);\n        go.position = this.addArrow.position;\n        go.parent = this.addArrow.parent;\n        go.active = true;\n        go.scale = 1.2;\n        go.runAction(cc.sequence(\n            cc.scaleTo(.15, .8).easing(cc.easeQuadraticActionInOut()),\n            cc.scaleTo(.15, 1.12).easing(cc.easeQuadraticActionInOut()),\n            cc.scaleTo(.15, 0.88).easing(cc.easeQuadraticActionInOut()),\n            cc.scaleTo(.15, 1.05).easing(cc.easeQuadraticActionInOut()),\n            cc.scaleTo(.15, .95).easing(cc.easeQuadraticActionInOut()),\n            cc.scaleTo(.15, 1).easing(cc.easeQuadraticActionIn()),\n            cc.delayTime(.2),\n            cc.fadeOut(.5),\n        ))\n\n        if(this.modelType == 0){\n            this.arrowNum += target.awardArrow;\n            this.updateArrow();\n        }\n        else{\n            this.timeDown += target.awardTime;\n            this.arrowLabel.string = \"\" + this.timeDown;\n        }\n    },\n\n    updateGold(){\n        this.goldLabel.string = \"\" + playerInfo.gold;\n    },\n\n    updateArrow(){\n        this.arrowLabel.string = \"\" + this.arrowNum;\n    },\n\n    resetTargets(){\n        for(let i = 0; i < this.targets.length; ++i){\n            this.targets[i].node.active = false;\n            this.targets[i].hit = false;\n            this.targets[i].stopMove();\n        }\n        for(let i = 0; i < this.polyTargets.length; ++i){\n            this.polyTargets[i].node.active = false;\n            this.polyTargets[i].hit = false;\n            this.polyTargets[i].stopMove();\n        }\n    },\n\n    reset(){\n        this.awarded = false;\n        this.startLevel = 0;\n        this.curIndex = 0;\n        this.levelIndex = 0;\n        this.score = 0;\n        this.arrowNum = 14;\n        this.timeDown = 30;\n        this.reviveChance = 1;\n        this.curHitNum = 0;\n        this.scoreLabel.string = \"0\";\n        this.arrowLabel.node.parent.active = false;\n        this.scoreLabel.node.active = false;\n        this.btnStart.active = false;\n        this.btnPause.active = false;\n        this.curLevelInfo = [];\n        this.player.reset();\n        this.moving = false;\n        this.lvProgress.reset();\n        this.lvProgress.node.active = false;\n        this.resetTargets();\n        this.stopHand();\n        this.unschedule(this.timeLoop);\n        gameInstance.soundManager.stopClock();\n        this.targets[0].node.parent.position = cc.v2(215,this.targets[0].node.parent.position.y);\n        this.targets[3].node.parent.position = cc.v2(1043,this.targets[0].node.parent.position.y);\n        this.polyTargets[0].node.parent.position = cc.v2(215,this.polyTargets[0].node.parent.position.y);\n        this.polyTargets[10].node.parent.position = cc.v2(1043,this.polyTargets[0].node.parent.position.y);\n    },\n\n    showBoomFire(){\n        for (let i = 0; i < 30; i++) {\n            this.scheduleOnce(function(){\n            let go = this.getFirework();\n            go.position = cc.v2(424,cc.view.getVisibleSize().height / 2);\n            go.active = true;\n            go.parent = this.node;\n            let x = Math.random()*1080-540;\n            let ran = Math.random() *0.5+0.5;\n            go.runAction(\n                    cc.spawn(\n                        cc.moveTo(ran,cc.v2(x,Math.random()*1080-360)),\n                        cc.rotateTo(ran,90),\n                        cc.sequence(\n                            cc.delayTime(ran * .7),\n                            cc.fadeTo(ran * .3, 0),\n                        ),\n                    ),           \n            )\n           }.bind(this),i*0.01);\n        }\n\n        for (let i = 0; i < 30; i++) {\n            this.scheduleOnce(function(){\n            let go = this.getFirework();\n            go.position = cc.v2(-424,cc.view.getVisibleSize().height / 2);\n            go.active = true;\n            go.parent = this.node;\n            let x = Math.random()*1080-540;\n            let ran = Math.random() *0.5+0.5;\n            let time = Math.random()*1+1;\n            go.runAction(\n                    cc.spawn(\n                        cc.moveTo(ran,cc.v2(x,Math.random()*1080-360)),\n                        cc.rotateTo(ran,90),\n                        cc.sequence(\n                            cc.delayTime(ran * .7),\n                            cc.fadeTo(ran * .3, 0),\n                        ),\n                    ),              \n            )\n           }.bind(this),i*0.01);\n        }\n    },\n\n    showFirework(){\n        for (let j = 0; j < 5; j++) {\n            this.scheduleOnce(function(){\n                let go = this.getFirework();\n                go.active = true;\n                go.parent = this.node;\n                go.position = cc.v2( Math.random()*1080 - 540 , Math.random()*40 +900 ) ;\n                go.runAction(\n                    cc.sequence(\n                        cc.spawn(\n                            cc.rotateBy(3,150),\n                            cc.moveTo(3, cc.v2(go.position.x,-1200) ),\n                        ),                                \n                        cc.callFunc(function(){\n                            go.active  = false;\n                            go.parent = null;\n                            this.fireworks.push(go);\n                        }.bind(this))\n                    )   \n                )\n            }.bind(this),j*0.5);\n        }\n    },\n\n    getFirework(){\n        if(this.fireworks.length<=0){\n            let go = cc.instantiate(this.firework);\n            go.zIndex = 10;\n            // go.scale = Math.random() * 1 + 1;\n            this.fireworks.push(go);\n            let num = parseInt( Math.random()*10 + 1 ) ;\n            this.firework.getComponent(cc.Sprite).spriteFrame = this.ui_anim.getSpriteFrame(\"ribbon\"+(num + 1));\n        }\n        return this.fireworks.pop();\n    },\n});\n"]}