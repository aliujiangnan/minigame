{"version":3,"sources":["../../../../../assets/script/view/assets/script/view/Target.js"],"names":["Utils","require","playerInfo","cc","Class","extends","Component","properties","head","default","type","Node","body","body1","bottom","hit","visible","speed","skinName","bodyFrame","onLoad","getComponent","Sprite","spriteFrame","start","init","info","index","height","scale","moveY","moveDir","penetratable","awardGold","awardArrow","awardTime","skinType","mustShoot","updateSkin","setHeadPos","node","position","v2","startX","y","parent","rotation","zIndex","active","movenable","move","frame","gameInstance","gameView","ui_main","getSpriteFrame","width","_rect","whiteFrame","explode","go","instantiate","booms","soundManager","playSound","pos","convertToWorldSpaceAR","addArrow","Math","random","go1","addArrowNo","addGoldNo","convertToNodeSpaceAR","runAction","sequence","scaleTo","easing","easeQuadraticActionInOut","easeQuadraticActionIn","delayTime","fadeOut","getChildByName","Label","string","arrowNum","updateArrow","gold","sys","localStorage","setItem","updateGold","sdkHelper","uploadPlayerInfo","playPart","particles","moving","stopAllActions","offset","easeSineOut","callFunc","repeatForever","easeSineInOut","bind","pauseMove","pauseAllActions","resumeMove","resumeAllActions","stopMove","update","updateMask","mask","targetsMask","x","scaleY","rock","rocking","rotateBy","easeSineIn"],"mappings":"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","file":"Target.js","sourceRoot":"../../../../../assets/script/view","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nvar Utils = require(\"../Utils/Utils\");\nvar playerInfo = require(\"../game/PlayerInfo\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        \n        head:{\n            default:null,\n            type:cc.Node,\n        },\n        body:{\n            default:null,\n            type:cc.Node,\n        },\n        body1:{\n            default:null,\n            type:cc.Node,\n        },\n        bottom:{\n            default:null,\n            type:cc.Node,\n        },\n        hit:{\n            default:false,\n            visible:false,\n        },\n        speed:{\n            default:1,\n            visible:false,\n        },\n        skinName:{\n            default:[],\n            visible:false,\n        },\n        bodyFrame:{\n            default:null,\n            visible:false,\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        this.skinName = [\"target1\",\"target_balloon\",\"target_glass\",\"target_wood\"];\n        this.bodyFrame = this.body.getComponent(cc.Sprite).spriteFrame;\n    },\n\n    start () {\n    },\n    \n    init(info, index){\n        this.body.height = info.height;\n        this.body.scale = 1;\n        this.index = index;\n        this.moveY = info.moveY;\n        this.moveDir = info.moveDir;\n        this.speed = info.speed;\n        this.penetratable = info.penetratable;\n        this.awardGold = info.awardGold;\n        this.awardArrow = info.awardArrow;\n        this.awardTime = info.awardTime;\n        this.skinType = info.skinType;\n        this.mustShoot = info.mustShoot;\n        this.updateSkin();\n        this.setHeadPos();\n        this.node.position = cc.v2(info.startX, this.node.position.y);\n        this.body.parent.rotation = 0;\n        this.node.zIndex = 6 - index;\n        this.head.active = true;\n        this.body.active = true;\n        this.bottom.active = true;\n        if(info.movenable == \"true\") this.move();\n    },\n\n    updateSkin(){\n        let frame = gameInstance.gameView.ui_main.getSpriteFrame(this.skinName[this.skinType - 1])\n        this.head.getComponent(cc.Sprite).spriteFrame = frame;\n       \n        this.head.width = frame._rect.width;\n        this.head.height = frame._rect.height;\n\n        if(this.skinType == 2){\n            this.body.getComponent(cc.Sprite).spriteFrame = gameInstance.gameView.whiteFrame;\n            this.body.width = 2;\n            this.body1.active = false;\n        }\n        else{\n            this.body.getComponent(cc.Sprite).spriteFrame = this.bodyFrame;\n            this.body.width = this.bodyFrame._rect.width;\n            this.body1.active = true;\n        }\n    },\n    \n    explode(){\n        if(this.skinType == 1) return;\n        this.head.active = false;\n        let gameView = gameInstance.gameView;\n        let go = cc.instantiate(gameView.booms[this.skinType - 2].node);\n        go.parent = this.head.parent;\n        go.position = this.head.position;\n        go.active = true;\n        if(this.skinType == 2) {\n            gameInstance.soundManager.playSound(\"ballon\");\n            this.body.active = false;\n            this.bottom.active = false;\n\n            let pos = this.head.convertToWorldSpaceAR(cc.v2(0,0));\n            let addArrow = Math.random() > .5;\n            let go1 = cc.instantiate(addArrow ? gameView.addArrowNo : gameView.addGoldNo);\n            go1.parent = gameView.node;\n            go1.position = gameView.node.convertToNodeSpaceAR(pos);\n            go1.active = true;\n            go1.scale = 1.2;\n            go1.runAction(cc.sequence(\n                cc.scaleTo(.15, .8).easing(cc.easeQuadraticActionInOut()),\n                cc.scaleTo(.15, 1.12).easing(cc.easeQuadraticActionInOut()),\n                cc.scaleTo(.15, 0.88).easing(cc.easeQuadraticActionInOut()),\n                cc.scaleTo(.15, 1.05).easing(cc.easeQuadraticActionInOut()),\n                cc.scaleTo(.15, .95).easing(cc.easeQuadraticActionInOut()),\n                cc.scaleTo(.15, 1).easing(cc.easeQuadraticActionIn()),\n                cc.delayTime(.2),\n                cc.fadeOut(.5),\n            ))\n\n            if(addArrow){\n                go1.getChildByName(\"label\").getComponent(cc.Label).string = \"\" + this.awardArrow;\n                gameInstance.gameView.arrowNum += this.awardArrow;\n                gameInstance.gameView.updateArrow();\n            }\n            else{\n                go1.getChildByName(\"label\").getComponent(cc.Label).string = \"\" + this.awardGold;\n                playerInfo.gold += this.awardGold;\n                cc.sys.localStorage.setItem(\"playerinfo_gold\",playerInfo.gold);\n                gameInstance.gameView.updateGold();\n                gameInstance.sdkHelper.uploadPlayerInfo();\n            }\n        }\n        else if(this.skinType == 3) gameInstance.soundManager.playSound(\"glass\");\n\n    },\n\n    playPart(index){\n        let go = cc.instantiate(gameInstance.gameView.particles[index].node);\n        go.parent = this.head.parent;\n        go.position = this.head.position;\n        go.active = true;\n    },\n\n    move(){\n        this.moving = true;\n        this.body.stopAllActions();\n        let offset = this.moveY / this.body.height;\n        this.body.runAction(cc.sequence(\n                cc.scaleTo(1 / this.speed,1,1 + this.moveDir * offset).easing(cc.easeSineOut()),\n                cc.callFunc(function(){\n                    this.body.runAction(cc.repeatForever(cc.sequence(\n                        cc.scaleTo(2 / this.speed,1,1 - this.moveDir * offset).easing(cc.easeSineInOut()),\n                        cc.scaleTo(2 / this.speed,1,1 + this.moveDir * offset).easing(cc.easeSineInOut()),\n                    )))\n                }.bind(this))\n            )\n        )\n    },\n\n    pauseMove(){\n        this.body.pauseAllActions();\n    },\n\n    resumeMove(){\n        this.body.resumeAllActions();\n    },\n\n    stopMove(){\n        this.moving = false;\n        this.body.stopAllActions();\n    },\n\n    update(){\n        if(this.moving){\n            this.setHeadPos();\n        }\n    },\n\n    updateMask(){\n        let pos = this.head.convertToWorldSpaceAR(cc.v2(0,0));\n        let mask = gameInstance.gameView.targetsMask[this.index];\n        mask.position = mask.parent.convertToNodeSpaceAR(pos);\n        mask.active = true;\n    },\n\n    setHeadPos(){\n        this.head.position = cc.v2(this.head.position.x, this.body.height * this.body.scaleY);\n        this.body1.position = cc.v2(this.body1.position.x, this.head.position.y - this.head.height / 2);\n    },\n\n    rock(){\n        this.rocking = true;\n        this.body.parent.runAction(cc.sequence(\n            cc.rotateBy(.2,-4 / 2).easing(cc.easeSineOut()),\n            cc.rotateBy(.2,7 / 2).easing(cc.easeSineInOut()),\n            cc.rotateBy(.2,-5 / 2).easing(cc.easeSineInOut()),\n            cc.rotateBy(.2,3 / 2).easing(cc.easeSineInOut()),\n            cc.rotateBy(.2,-1 / 2).easing(cc.easeSineIn()),\n            cc.callFunc(function(){\n                this.rocking = false;\n            }.bind(this))\n        ))\n    },\n});\n"]}