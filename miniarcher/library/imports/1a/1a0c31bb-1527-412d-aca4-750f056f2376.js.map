{"version":3,"sources":["../../../../../assets/script/view/assets/script/view/Player.js"],"names":["Utils","require","playerInfo","cc","Class","extends","Component","properties","body","default","type","Sprite","arm1","arm2","arm3","bow","Node","bowStrings","bowHeads","hand","arrow","curArrow","visible","arrows","rounds","shootEnable","ui_skin","SpriteAtlas","shadow","speedMutl","start","update","dt","updateSkin","armIndics","spriteFrame","getSpriteFrame","useSkin","putArrow","node","parent","name","go","instantiate","position","active","zIndex","getComponent","aim","startPos","curPos","force","Math","min","abs","x","angle","getS2TAngle","y","rotation","v2","i","length","convertToWorldSpaceAR","x1","t","cos","getRad","y1","sin","convertToNodeSpaceAR","handPos","bowHeadPos","scaleY","getDistance","height","shoot","gameInstance","soundManager","playSound","canvas","width","view","getVisibleSize","resetArm","push","gameView","modelType","arrowNum","updateArrow","jump","runAction","spawn","sequence","callFunc","bind","moveBy","easing","easeSineOut","easeSineIn","easeQuadraticActionOut","scaleTo","clearArrows","clearSelf","reset"],"mappings":"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","file":"Player.js","sourceRoot":"../../../../../assets/script/view","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nvar Utils = require(\"../utils/Utils\");\nvar playerInfo = require(\"../game/PlayerInfo\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        body:{\n            default:null,\n            type:cc.Sprite,\n        },\n        arm1:{\n            default:null,\n            type:cc.Sprite,\n        },\n        arm2:{\n            default:null,\n            type:cc.Sprite,\n        },\n        arm3:{\n            default:null,\n            type:cc.Sprite,\n        },\n        bow:{\n            default:null,\n            type:cc.Node,\n        },\n        bowStrings:{\n            default:[],\n            type:[cc.Node],\n        },\n        bowHeads:{\n            default:[],\n            type:[cc.Node],\n        },\n        hand:{\n            default:null,\n            type:cc.Node,\n        },\n        arrow:{\n            default:null,\n            type:cc.Node,\n        },\n        curArrow:{\n            default:null,\n            visible:false,\n        },\n        arrows:{\n            default:[],\n            visible:false,\n        },\n        rounds:{\n            default:[],\n            type:[cc.Node],\n        },\n        shootEnable:{\n            default:true,\n            visible:false,\n        },\n        ui_skin:{\n            default:null,\n            type:cc.SpriteAtlas\n        },\n        shadow:{\n            default:null,\n            type:cc.Node,\n        },\n        speedMutl:{\n            default:100,\n            visible:false,\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n\n    },\n\n    update (dt) {\n        \n    },\n\n    updateSkin(){\n        let armIndics = [1,2,2,4,4,1,2,2,5,3];\n        this.body.spriteFrame = this.ui_skin.getSpriteFrame(\"game_p\" + playerInfo.useSkin);\n        this.arm3.spriteFrame = this.ui_skin.getSpriteFrame(\"game_arm_under\" + armIndics[playerInfo.useSkin - 1]);\n        this.arm2.spriteFrame = this.ui_skin.getSpriteFrame(\"game_arm_on\" + armIndics[playerInfo.useSkin - 1]);\n    },\n\n    putArrow(){\n        if(this.curArrow != null && this.curArrow.node.parent != null && this.curArrow.node.parent.name == \"arm2\") {\n            return;\n        }\n        let go = cc.instantiate(this.arrow);\n        go.parent = this.arrow.parent;\n        go.position = this.arrow.position;\n        go.active = true;\n        go.zIndex = -1;\n        this.curArrow = go.getComponent(\"Arrow\");\n        \n    },\n\n    aim(startPos, curPos){\n\n        this.force = Math.min(Math.abs(curPos.x - startPos.x) / 106, 1);\n        let angle = Utils.getS2TAngle(startPos.x, curPos.x, startPos.y, curPos.y, 1);\n        let rotation = angle;\n\n        if(rotation > 30 && rotation < 165)\n            rotation = 30;\n        else if(rotation < 300 && rotation > 165)\n            rotation = 300;\n\n        if(rotation >= 300)\n            this.angle = 360 - rotation;\n        else if(rotation <= 30)\n            this.angle = -rotation;\n        this.arm1.node.parent.rotation = rotation;\n        this.arm3.node.parent.rotation = rotation;\n        this.arm2.node.x = -this.force * 40;\n\n        this.rounds[0].parent.active = true;\n        this.rounds[0].parent.position = cc.v2(\n            70 + this.force * 30,\n            this.rounds[0].parent.position.y\n        )\n        for(let i = 0; i < this.rounds.length; ++i){\n            let x = this.rounds[i].parent.convertToWorldSpaceAR(cc.v2(0, 0)).x + 30*i;\n            let x1 = this.arrow.convertToWorldSpaceAR(cc.v2(0, 0)).x;\n            let t = (x - x1) / (60 * this.force * this.speedMutl * Math.cos(Utils.getRad(this.angle)));\n            let y = this.arrow.convertToWorldSpaceAR(cc.v2(0, 0)).y;\n            let y1 = y + 60 * this.force * this.speedMutl * t * Math.sin(Utils.getRad(this.angle)) - 0.5 * 50 * t * t * 100;\n            this.rounds[i].position = this.rounds[i].parent.convertToNodeSpaceAR(cc.v2(x,y1));\n        }\n\n        let handPos = this.hand.convertToWorldSpaceAR(cc.v2(0,0));\n        for(let i = 0; i < 2; ++i){\n            let bowHeadPos = this.bowHeads[i].convertToWorldSpaceAR(cc.v2(0,0));\n            \n            this.bowStrings[i].position = this.bow.convertToNodeSpaceAR(handPos);\n            this.bowStrings[i].rotation = Utils.getS2TAngle(handPos.x, bowHeadPos.x, handPos.y, bowHeadPos.y, 1) - 90 - this.arm1.node.parent.rotation + i * 180;\n            this.bowStrings[i].scaleY = Utils.getDistance(handPos.x, bowHeadPos.x, handPos.y, bowHeadPos.y) / this.bowStrings[i].height;\n        }\n    },\n\n    shoot(){\n        this.rounds[0].parent.active = false;\n\n        if(this.curArrow.node.parent == null || (this.curArrow.node.parent.name != this.arrow.parent.name)) return;\n\n        if(!this.shootEnable) return;\n        this.shootEnable = false;\n\n        gameInstance.soundManager.playSound(\"shoot\");\n\n        let position = this.curArrow.node.convertToWorldSpaceAR(cc.v2(0, 0));\n        this.curArrow.node.parent = this.node.parent;\n        this.curArrow.node.position = cc.v2(position.x - gameInstance.canvas.node.width / 2, position.y - cc.view.getVisibleSize().height / 2)\n        this.curArrow.node.rotation = this.arm1.node.parent.rotation;\n        this.curArrow.node.zIndex = 1;\n        this.curArrow.shoot(this.angle,this.force * this.speedMutl);\n        this.resetArm();\n\n        this.arrows.push(this.curArrow);\n\n        this.arm2.node.x = -0.2 * 40;\n        \n        if(gameInstance.gameView.modelType == 0) {\n            gameInstance.gameView.arrowNum--;\n            gameInstance.gameView.updateArrow();\n        }\n    },\n\n    jump(){\n        this.node.runAction(cc.spawn(\n            cc.sequence(\n                cc.callFunc(function(){\n                    gameInstance.soundManager.playSound(\"walk1\");\n                }.bind(this)),\n                cc.moveBy(.1,cc.v2(0,40)).easing(cc.easeSineOut()),\n                cc.moveBy(.1,cc.v2(0,-40)).easing(cc.easeSineIn()),\n                cc.callFunc(function(){\n                    gameInstance.soundManager.playSound(\"walk1\");\n                }.bind(this)),\n                cc.moveBy(.1,cc.v2(0,30)).easing(cc.easeSineOut()),\n                cc.moveBy(.1,cc.v2(0,-30)).easing(cc.easeSineIn()),\n                cc.callFunc(function(){\n                    gameInstance.soundManager.playSound(\"walk1\");\n                }.bind(this)),\n                cc.moveBy(.1,cc.v2(0,20)).easing(cc.easeSineOut()),\n                cc.moveBy(.1,cc.v2(0,-20)).easing(cc.easeSineIn()),\n            ),\n            cc.sequence(\n                cc.moveBy(0.6,cc.v2(200,0)).easing(cc.easeQuadraticActionOut()),\n                cc.moveBy(0.4,cc.v2(-200,0)).easing(cc.easeQuadraticActionOut()),\n            ),\n        ))\n\n        this.shadow.runAction(\n            cc.sequence(\n                cc.scaleTo(.1,0.7).easing(cc.easeSineOut()),\n                cc.scaleTo(.1,1).easing(cc.easeSineIn()),\n                cc.scaleTo(.1,0.8).easing(cc.easeSineOut()),\n                cc.scaleTo(.1,1).easing(cc.easeSineIn()),\n                cc.scaleTo(.1,0.9).easing(cc.easeSineOut()),\n                cc.scaleTo(.1,1).easing(cc.easeSineIn()),\n            ),\n        )\n    },\n\n    clearArrows(){\n        for(let i = 0; i < this.arrows.length; ++i)\n            this.arrows[i].clearSelf();\n        this.arrows = [];\n    },\n\n    resetArm(){\n        this.angle = 0;\n        this.force = 0;\n        for(let i = 0; i < 2; ++i){\n            this.bowStrings[i].position = cc.v2(-20, 0);\n            this.bowStrings[i].rotation = 0;\n            this.bowStrings[i].scaleY = 1;\n        }\n    },\n\n    reset(){\n        this.clearArrows();\n        if(this.curArrow != null) this.curArrow.node.parent = null;\n        this.resetArm();\n        this.arm1.node.parent.rotation = 0;\n        this.arm2.node.x = 0;\n        this.arm3.node.parent.rotation = 0;\n        this.rounds[0].parent.active = false;\n        this.shootEnable = true;\n    },\n});\n"]}