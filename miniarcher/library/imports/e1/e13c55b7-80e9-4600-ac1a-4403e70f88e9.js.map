{"version":3,"sources":["../../../../../assets/script/view/assets/script/view/StartView.js"],"names":["playerInfo","require","cc","Class","extends","Component","properties","skinLabel","default","type","Label","settingContent","Node","settingOpen","visible","btnSoundClose","btnSoundOpen","start","i6","windowSize","view","getVisibleSize","cur","height","width","toFixed","widget","parent","getComponent","Widget","top","updateAlignment","init","updateSkinNum","updateSoundBtn","skinList","JSON","parse","hasNum","i","length","string","onBtnSetting","gameInstance","soundManager","playSound","active","stopAllActions","runAction","sequence","moveTo","v2","easing","easeQuadraticActionOut","callFunc","bind","onBtnSound","setSoundOpen","isSoundOpen","onBtnLock","onBtnStart","eve","data","index","gameView","startGame","node","onBtnShop","shopView","onBtnRank","onRankCallback","rankView"],"mappings":"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","file":"StartView.js","sourceRoot":"../../../../../assets/script/view","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nvar playerInfo = require(\"../game/PlayerInfo\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //     // ATTRIBUTES:\r\n        //     default: null,        // The default value will be used only when the component attaching\r\n        //                           // to a node for the first time\r\n        //     type: cc.SpriteFrame, // optional, default is typeof default\r\n        //     serializable: true,   // optional, default is true\r\n        // },\r\n        // bar: {\r\n        //     get () {\r\n        //         return this._bar;\r\n        //     },\r\n        //     set (value) {\r\n        //         this._bar = value;\r\n        //     }\r\n        // },\r\n        skinLabel:{\r\n            default:null,\r\n            type:cc.Label,\r\n        },\r\n        settingContent:{\r\n            default:null,\r\n            type:cc.Node,\r\n        },\r\n        settingOpen:{\r\n            default:false,\r\n            visible:false,\r\n        },\r\n        btnSoundClose:{\r\n            default:null,\r\n            type:cc.Node,\r\n        },\r\n        btnSoundOpen:{\r\n            default:null,\r\n            type:cc.Node,\r\n        }\r\n    },\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    // onLoad () {},\r\n\r\n    start () {\r\n        let i6 = 1334 / 750;\r\n        let windowSize = cc.view.getVisibleSize();\r\n        let cur = windowSize.height / windowSize.width;\r\n\r\n        if(cur.toFixed(3) > i6.toFixed(3)){\r\n            let widget = this.settingContent.parent.parent.getComponent(cc.Widget);\r\n            widget.top = 210;\r\n            widget.updateAlignment();\r\n        }\r\n    },\r\n    \r\n    init(){\r\n        \r\n        this.updateSkinNum();\r\n        this.updateSoundBtn();\r\n    },\r\n\r\n    updateSkinNum(){\r\n        let skinList = JSON.parse(playerInfo.skinList);\r\n        let hasNum = 0;\r\n        for(let i = 0; i < skinList.length; ++i)\r\n            if(skinList[i] == 1) hasNum++;\r\n        this.skinLabel.string = hasNum + \"/10\";\r\n    },\r\n\r\n    onBtnSetting(){\r\n        gameInstance.soundManager.playSound(\"btn\");\r\n        if(!this.settingOpen) this.settingContent.active = true;\r\n        this.settingContent.stopAllActions();\r\n        this.settingContent.runAction(cc.sequence(\r\n                cc.moveTo(.3,cc.v2(0,this.settingOpen ? 200 : 0)).easing(cc.easeQuadraticActionOut()),\r\n                cc.callFunc(function(){\r\n                    this.settingOpen = !this.settingOpen;\r\n                    if(!this.settingOpen) this.settingContent.active = false;\r\n                }.bind(this))\r\n            )\r\n        )\r\n    },\r\n\r\n    onBtnSound(){\r\n        gameInstance.soundManager.playSound(\"btn\");\r\n        gameInstance.soundManager.setSoundOpen(!gameInstance.soundManager.isSoundOpen);\r\n        this.updateSoundBtn();\r\n    },\r\n\r\n    updateSoundBtn(){\r\n        this.btnSoundClose.active = gameInstance.soundManager.isSoundOpen;\r\n        this.btnSoundOpen.active = !gameInstance.soundManager.isSoundOpen;\r\n    },\r\n\r\n    onBtnLock(){\r\n        gameInstance.soundManager.playSound(\"btn\");\r\n    },\r\n\r\n    onBtnStart(eve, data){\r\n        let index = JSON.parse(data);\r\n        if(index > 1) return;\r\n        gameInstance.soundManager.playSound(\"btn\");\r\n        gameInstance.gameView.startGame(index);\r\n        this.node.active = false;\r\n    },\r\n\r\n    onBtnShop(){\r\n        gameInstance.soundManager.playSound(\"btn\");\r\n        gameInstance.shopView.node.active = true;\r\n        gameInstance.shopView.init();\r\n    },\r\n\r\n    onBtnRank(){\r\n        gameInstance.soundManager.playSound(\"btn\");\r\n        this.onRankCallback();\r\n    },\r\n\r\n    onRankCallback(){\r\n\r\n        this.node.active = false;\r\n        gameInstance.rankView.node.active = true;\r\n        gameInstance.rankView.init();\r\n    }\r\n});\r\n"]}