{"version":3,"sources":["../../../../../assets/script/game/assets/script/game/GameManager.js"],"names":["playerInfo","require","isEmpty","s","cc","Class","extends","Component","properties","canvas","default","type","Canvas","levelesInfo","visible","soundManager","gameView","startView","pauseView","adView","overView","shopView","awardView","gotSkinView","rankView","isWeChat","sdkHelper","onLoad","window","gameInstance","loader","loadRes","err","results","json","init","bind","login","initPlayerInfo","start","sys","localStorage","getItem","setItem","gold","parseInt","highScore","skinList","shopList","useSkin","isSoundOpen","lastLevelIndex","setSoundOpen"],"mappings":"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","file":"GameManager.js","sourceRoot":"../../../../../assets/script/game","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nvar playerInfo = require(\"../game/PlayerInfo\");\n\nvar isEmpty = function(s){\n    return s == \"\" || s == null;\n}\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        canvas:{\n            default:null,\n            type:cc.Canvas,\n        },\n        levelesInfo:{\n            default:[],\n            visible:false,\n        },\n        soundManager:{\n            default:null,\n            type:require(\"SoundManager\")\n        },\n        gameView:{\n            default:null,\n            type:require(\"GameView\")\n        },\n        startView:{\n            default:null,\n            type:require(\"StartView\")\n        },\n        pauseView:{\n            default:null,\n            type:require(\"PauseView\")\n        },\n        adView:{\n            default:null,\n            type:require(\"AdView\")\n        },\n        overView:{\n            default:null,\n            type:require(\"OverView\")\n        },\n        shopView:{\n            default:null,\n            type:require(\"ShopView\")\n        },\n        awardView:{\n            default:null,\n            type:require(\"AwardView\")\n        },\n        gotSkinView:{\n            default:null,\n            type:require(\"GotSkinView\")\n        },\n        rankView:{\n            default:null,\n            type:require(\"RankView\")\n        },\n        isWeChat:{\n            default:false,\n            visible:false,\n        },\n        sdkHelper:{\n            default:null,\n            type:require(\"SDKHelper\"),\n        }\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad () {\n        window.gameInstance = this;\n\n        cc.loader.loadRes(\"conf/levelesInfo\", function (err, results) \n        {\n            this.levelesInfo = results.json;\n            this.startView.init();\n        }.bind(this));\n\n        this.sdkHelper.login();\n        this.initPlayerInfo();\n    },\n\n    start () {\n\n    },\n\n    // update (dt) {},\n\n    initPlayerInfo(){\n        if(isEmpty(cc.sys.localStorage.getItem(\"playerinfo_gold\")))\n            cc.sys.localStorage.setItem(\"playerinfo_gold\",playerInfo.gold);\n        playerInfo.gold = parseInt(cc.sys.localStorage.getItem(\"playerinfo_gold\"));\n\n        if(isEmpty(cc.sys.localStorage.getItem(\"playerinfo_highscore\")))\n            cc.sys.localStorage.setItem(\"playerinfo_highscore\",playerInfo.highScore);\n        playerInfo.highScore = parseInt(cc.sys.localStorage.getItem(\"playerinfo_highscore\"));\n\n        if(isEmpty(cc.sys.localStorage.getItem(\"playerinfo_skinlist\")))\n            cc.sys.localStorage.setItem(\"playerinfo_skinlist\",playerInfo.skinList);\n        playerInfo.skinList = cc.sys.localStorage.getItem(\"playerinfo_skinlist\");\n\n        if(isEmpty(cc.sys.localStorage.getItem(\"playerinfo_shoplist\")))\n            cc.sys.localStorage.setItem(\"playerinfo_shoplist\",playerInfo.shopList);\n        playerInfo.shopList = cc.sys.localStorage.getItem(\"playerinfo_shoplist\");\n\n        if(isEmpty(cc.sys.localStorage.getItem(\"playerinfo_useskin\")))\n            cc.sys.localStorage.setItem(\"playerinfo_useskin\",playerInfo.useSkin);\n        playerInfo.useSkin = parseInt(cc.sys.localStorage.getItem(\"playerinfo_useskin\"));\n\n        if(isEmpty(cc.sys.localStorage.getItem(\"playerinfo_issoundopen\")))\n            cc.sys.localStorage.setItem(\"playerinfo_issoundopen\",playerInfo.isSoundOpen);\n        playerInfo.isSoundOpen = cc.sys.localStorage.getItem(\"playerinfo_issoundopen\");\n\n        if(isEmpty(cc.sys.localStorage.getItem(\"playerinfo_lastlevelindex\")))\n            cc.sys.localStorage.setItem(\"playerinfo_lastlevelindex\",playerInfo.lastLevelIndex);\n        playerInfo.lastLevelIndex = parseInt(cc.sys.localStorage.getItem(\"playerinfo_lastlevelindex\"));\n\n        this.soundManager.setSoundOpen(playerInfo.isSoundOpen == \"true\");\n    },\n\n});\n"]}